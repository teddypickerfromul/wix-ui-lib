<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Wix SDK Source: Settings.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top navbar-inverse">
		<div class="navbar-inner">
			<a class="brand" href="index.html">Wix SDK</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="Activities.html">Activities</a>
						</li>
						
						<li>
							<a href="Contacts.html">Contacts</a>
						</li>
						
						<li>
							<a href="Dashboard.html">Dashboard</a>
						</li>
						
						<li>
							<a href="Error.html">Error</a>
						</li>
						
						<li>
							<a href="Events.html">Events</a>
						</li>
						
						<li>
							<a href="PubSub_.html">PubSub</a>
						</li>
						
						<li>
							<a href="Settings.html">Settings</a>
						</li>
						
						<li>
							<a href="Theme.html">Theme</a>
						</li>
						
						<li>
							<a href="Utils_.html">Utils</a>
						</li>
						
						<li>
							<a href="Utils.Media.html">Utils.Media</a>
						</li>
						
						<li>
							<a href="WindowOrigin.html">WindowOrigin</a>
						</li>
						
						<li>
							<a href="WindowPlacement.html">WindowPlacement</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="module-Worker.html">Worker</a>
						</li>
						
						<li>
							<a href="PubSub.html">Worker/PubSub</a>
						</li>
						
						<li>
							<a href="Utils.html">Worker/Utils</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: Settings.js</h1>
    
<section>
	<article>
		<pre
			class="sunlight-highlight-javascript linenums">/**
 * This is the description for the Settings namespace.
 * @namespace Settings
 */
define(['core', 'gaTracker', 'Styles'], function (core, gaTracker, Styles) {

    /**
     * Function getStyleParams
     * Returns the application style parameters which are saved in the site
     *

     * @since 1.22.0
     * @param callback (Function) callback function: function(style)
     * @return (Object) a map describing style parameters by their type.
     */
    var getStyleParams = function (callback) {
        core.reportSdkMsg('Wix.Settings.getStyleParams is DEPRECATED use Wix.Styles.getStyleParams');
        return Styles.getStyleParams(callback);
    };

    /** Function getStyleColorByKey
     *
     * Returns the css color value of saved style parameter
     *
     * @deprecated
     * @since SDK 1.22.0
     * @param colorKey (String) a unique key describing a color style parameter
     * @return (String) css color string. E.g "#FFFFFF" or "rgba(0,0,0,0.5)"
     */
    var getStyleColorByKey = function (colorKey) {
        core.reportSdkMsg('Wix.Settings.getStyleColorByKey is DEPRECATED use Wix.Styles.getStyleColorByKey');
        return Styles.getStyleColorByKey(colorKey);
    };

    /**
     * Function getColorByreference
     * Returns the color object of editor style
     *
     * @deprecated
     * @since 1.22.0
     * @param colorReference (String) a unique key describing a theme color parameter
     * @return (Object) a map describing a Wix style color.
     */
    var getColorByreference = function (colorReference) {
        core.reportSdkMsg('Wix.Settings.getColorByreference is DEPRECATED use Wix.Styles.getColorByreference');
        return Styles.getColorByreference(colorReference);
    };

    /**
     * Function setColorParam
     * Sets a style color parameter
     *
     * @deprecated
     * @since 1.22.0
     * @param key (String) a unique key describing a color style parameter
     * @param value (Object)
     */
    var setColorParam = function (key, value) {
        core.reportSdkMsg('Wix.Settings.setColorParam is DEPRECATED use Wix.Styles.setColorParam');
        return Styles.setColorParam(key, value);
    };

    /**
     * Function setNumberParam
     * Sets a style number parameter
     *
     * @deprecated
     * @since 1.22.0
     * @param key (String) a unique key describing a number style parameter
     * @param value (Number)
     */
    var setNumberParam = function (key, value) {
        core.reportSdkMsg('Wix.Settings.setNumberParam is DEPRECATED use Wix.Styles.setNumberParam');
        return Styles.setNumberParam(key, value);
    };

    /** Function setBooleanParam
     *
     * Sets a style boolean parameter
     *
     * @deprecated
     * @since 1.22.0
     * @param key (String) a unique key describing a boolean style parameter
     * @param value (Boolean)
     */
    var setBooleanParam = function (key, value) {
        core.reportSdkMsg('Wix.Settings.setBooleanParam is DEPRECATED use Wix.Styles.setBooleanParam');
        return Styles.setBooleanParam(key, value);
    };

    /** Function getSiteColors
     *
     * Returns the currently active site colors
     *
     * @deprecated
     * @since 1.12.0
     * @param callback (Function) callback function: function(colors)
     */
    var getSiteColors = function (callback) {
        core.reportSdkMsg('Wix.Settings.getSiteColors is DEPRECATED use Wix.Styles.getSiteColors');
        return Styles.getSiteColors(callback);
    };

    var getSiteInfo = function (onSuccess) {
        base.getSiteInfo(onSuccess);
    };

    var refreshApp = function (queryParams) {
        refreshAppByCompIds(null, queryParams);
    };

    /** Function refreshAppByCompIds
     *
     * Refresh a specific app's component
     *
     * @since SDK 1.12.0
     * @param compIds (String) a component id
     * @param queryParams (String) custom query parameters to pass to the component
     */
    var refreshAppByCompIds = function (compIds, queryParams) {
        core.sendMessage(core.MessageTypes.REFRESH_APP, {'queryParams': queryParams, 'compIds': compIds});
    };

    var openBillingPage = function () {
        core.sendMessage(core.MessageTypes.OPEN_BILLING_PAGE);
    };

    var openMediaDialog = function (mediaType, multipleSelection, onSuccess, onCancel) {
        if (!onSuccess) {
            return;
        }
        mediaType = mediaType || this.MediaType.IMAGE;
        multipleSelection = multipleSelection || false;

        var onCancelCallbackSpecified = typeof onCancel === 'function';

        var callback = function (data) {
            if (data.wasCancelled) {
                if (onCancelCallbackSpecified) {
                    onCancel.apply(this, arguments);
                }
            } else {
                onSuccess.apply(this, arguments);
            }
        };

        core.sendMessage(core.MessageTypes.OPEN_MEDIA_DIALOG, {
                mediaType: mediaType,
                multiSelection: multipleSelection,
                callOnCancel: onCancelCallbackSpecified
            },
            callback);
    };

    /**
     * Function triggerSettingsUpdatedEvent
     *
     * Sends a message (json object) to a specific app components or to all the app components
     * This API is inspired by HTML5 iframe messages - https://developer.mozilla.org/en-US/docs/DOM/window.postMessage
     *
     * @since 1.17.0
     * @param message (Object,Optional) a custom json object representing a message
     * @param compId (String,Optional) component id to sent message or '*' (default) to send the message to all the app's components
     */
    var triggerSettingsUpdatedEvent = function (message, compId) {
        message = message || {};
        compId = compId || '*';

        core.sendMessage(core.MessageTypes.POST_MESSAGE, {'message': message, 'compId': compId});
    };

    /**
     * Function getSitePages
     *
     * Returns the pages which are used in hosting site by name
     *
     * @since 1.17.0
     * @param callback (Function) a callback function that returns the site pages
     *   callback signature: function(data) {}
     *   data signature: { pages: ['page1', 'page2', 'myPage', ...]}
     */
    var getSitePages = function (callback) {
        core.sendMessage(core.MessageTypes.GET_SITE_PAGES, null, callback);
    };

    /**
     * Set window placement for a widget
     *
     * @param compId (String) component id to change placement to
     * @param placement (Wix.WindowPlacement enum) new placement for the widget window
     * @param verticalMargin (Number) vertical offset from the placement area
     * @param horizontalMargin (Number) horizontal offset from the placement area
     */
    var setWindowPlacement = function (compId, placement, verticalMargin, horizontalMargin) {
        if (!compId || !placement) {
            core.reportSdkError('Mandatory arguments - compId & placement must be specified');
        }

        if (!Wix.WindowPlacement.hasOwnProperty(placement)) {
            core.reportSdkError('Invalid argument - placement value should be set using Wix.WindowPlacement');
        }
        core.sendMessage(core.MessageTypes.SET_WINDOW_PLACEMENT, {
            'compId': compId,
            placement: placement,
            verticalMargin: verticalMargin,
            horizontalMargin: horizontalMargin
        });
    };

    /**
     * Get window placement for a widget
     *
     * @param compId (String) component id to change placement to
     * @param callback (Function) a callback function that returns the component placement
     *   callback signature: function(data) {}
     */
    var getWindowPlacement = function (compId, callback) {
        if (!compId || !callback) {
            core.reportSdkError('Mandatory arguments - compId & callback must be specified');
        }

        core.sendMessage(core.MessageTypes.GET_WINDOW_PLACEMENT, {'compId': compId}, callback);
    };

    var getDashboardAppUrl = function (callback) {
        if (!callback) {
            core.reportSdkError('Mandatory arguments - a callback must be specified');
        }

        core.sendMessage(core.MessageTypes.GET_DASHBOARD_APP_URL, undefined, callback);
    };


    return {
        /**
         * @enum
         * @memberof Settings
         * @since SDK 1.35.0
         */
        MediaType: {
            IMAGE: 'photos',
            BACKGROUND: 'backgrounds',
            AUDIO: 'audio',
            DOCUMENT: 'documents',
            SWF: 'swf'
        },
        getColorByreference: getColorByreference,

        /**
         * This method returns the URL leading to your BackOffice (AKA Business) application, in the Wix Dashboard.
         * The URL is fully qualified and starts with "//" for using HTTPS if supported. If the site is not saved, save dialog will be prompted.
         * @function
         * @memberof Settings
         * @author tomergab@wix.com
         * @since SDK 1.32.0
         * @param {Function} callback A callback function to receive the URL of the app in the dashboard (AKA BackOffice/Business).
         * @example
         *
         * Wix.Settings.getDashboardAppUrl(function(url) {
         *    // do something with the URL
         * });
         */
        getDashboardAppUrl: getDashboardAppUrl,


        getSiteColors: getSiteColors,

        /**
         * The getsiteInfo method is used to retrieve information about the host site in which the app is shown.
         * @function
         * @memberof Settings
         * @since SDK 1.12.0
         * @param {Function} callback A callback function to receive the site info.
         * @return {Object} data JSON containing the site info. It's properties are:
         *
         *  Name           | Type      | Description
         * ----------------|-----------|------------
         * siteTitle       | `String`  | The title of the site that is used for SEO.
         * pageTitle       | `String`  | The site current page title that is used for SEO.
         * siteDescription | `String`  | The description of the site that is used for SEO
         * siteKeywords    | `String`  | The keywords which were related to the site and are used for SEO.
         * referrer        | `String`  | The referrer header of the http request.
         * url             | `String`  | The full url taken from the location.href, include internal site state, for example: http://user.wix.com/site-name#!pageTitle/pageId, http://www.domain.com#!pageTitle/pageId
         * baseUrl         | `String`  | Base url of the current site, for example: http://user.wix.com/site-name, http://www.domain.com
         * @example
         *
         * Wix.Settings.getSiteInfo(function(siteInfo) {
         *    // do something with the siteInfo
         * });
         */
        getSiteInfo: getSiteInfo,

        /**
         * The getSitePages method is used to retrieve the site structure from the hosting Wix Platform. The site structure includes visible and hidden pages as well as sub pages.
         * @function
         * @memberof Settings
         * @since SDK 1.17.0
         * @param {Function} callback A callback function to receive the site pages.
         * @return {Array} Array containing an ordered set of the site pages. A single page description contains the following properties:
         *
         *  Name             | Type      | Description
         * ------------------|-----------|------------
         * id                | `String`  | The page id.
         * title             | `String`  | The page title.
         * hide              | `Boolean` | A flag indicating if the page is hidden.
         * subPages(optional)| `Array`   | An ordered set of sub pages.
         * @example
         *
         * Wix.Settings.getSitePages(function(sitePages) {
         *    // do something with the site pages
         * });
         */
        getSitePages: getSitePages,


        getStyleColorByKey: getStyleColorByKey,


        /**
         * The getStyleParams method is used to retrieve the style parameters from the hosting Wix Platform. The parameters includes colors numbers, booleans.
         * @function
         * @memberof Settings
         * @deprecated Use Wix.Styles.getStyleParams
         * @since SDK 1.22.0
         * @param {Function} callback A callback function to receive the style parameters.
         * @example
         *
         * Wix.Settings.getStyleParams(function(styleParams) {
         *    // do something with the style params
         * });
         */
        getStyleParams: getStyleParams,

        getWindowPlacement: getWindowPlacement,

        /**
         * The Setting.openBillingPage method allows the app to offer a premium package from within the app settings.
         * When called it will open the Wix billing system page in a new browser window.
         * @function
         * @memberof Settings
         * @since SDK 1.16.0
         * @example
         *
         * Wix.Settings.openBillingPage();
         */
        openBillingPage: openBillingPage,

        /**
         * This method opens the Wix media dialog inside the WIx Editor, and let's the site owner choose a an existing file from the Wix media galleries,
         * or upload a new file instead. When completed a callback function returns the meta data of the selected item/s.
         * This method returns a meta data descriptor for a selected media item. To access the media item from your code you will need to construct a
         * full URL using that descriptor. Since the media items URLs format is set by Wix and might changed in the future,
         * we are requiring that the URL construction will be done using the SDK. Use one of the Wix.Utils.Media.get* methods to get the desired media item URL.
         * @function
         * @memberof Settings
         * @since SDK 1.17.0
         * @param {Settings.MediaType} mediaType Media gallery to choose from - image, background, audio and swf.
         * @param {Boolean} multiSelect selection mode, single (false) or multiple (true) item to choose from.
         * @param {Function} onSuccess callback function, passing the media item/s meta data.
         * @param {Function} onCancel callback function called when user cancels.
         * @return This is an asynchronous function, the returned value is passed in the onSuccess callback function.
         * An object (single selection) or Array of objects (multiple selection). The object describes the meta data of the selected media item.
         *
         * @example
         *
         * var imageUrl = Wix.Settings.openMediaDialog(Wix.Settings.MediaType.IMAGE, false, function(data) {
         *    // save image data
         * };
         */
        openMediaDialog: openMediaDialog,

        /**
         * Notifying the host site that the app requires reloading.
         * The refreshApp method is normally used when a user changes the app settings in the settings iframe, and as a result requires that the Widget or Page iframes should be reloaded such that the new settings will take affect.
         * The refreshApp method accepts a single optional argument, an object. Where each of the object's properties will translate into a query parameter in the iframe URL.
         * @function
         * @memberof Settings
         * @since SDK 1.12.0
         * @param {Object} [queryParams] A map of custom query parameters that should be added to the iframe URL.
         * @example
         *
         * //The App's components (all of them) will be refreshed without custom query parameters
         * Wix.Settings.refreshApp();
         *
         * //The App's components (all of them) will be refreshed with custom query parameters as specified in the object argument - [BASE-URL]?[WIX-QUERY-PARAMETERS]&param1=value1&param2=value2
         * Wix.Settings.refreshApp({param1: "value1", param2: "value2"})
         */
        refreshApp: refreshApp,


        refreshAppByCompIds: refreshAppByCompIds,
        setBooleanParam: setBooleanParam,
        setColorParam: setColorParam,
        setNumberParam: setNumberParam,
        setWindowPlacement: setWindowPlacement,
        triggerSettingsUpdatedEvent: triggerSettingsUpdatedEvent
    };
});</pre>
	</article>
</section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					
		<span class="copyright">
		Wix.com Copyright Â© 2014.
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a>
		on Tue Sep 23rd 2014 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>
